<div class="flex flex-col min-h-svh">
    <form [formGroup]="createProjectForm">
        <div *ngIf="!isTopFormHidden"
            class="flex max-lg:grid justify-around align-baseline bg-slate-100 border-b-4 border-b-slate-200 overflow-auto">
            <div class="p-1 mx-2">
                <h2 class="font-semibold mt-4">Project Name:</h2>
                <input formControlName="projectTitle" class="p-2 px-4 border border-gray-300 rounded w-full" type="text"
                    placeholder="Type the project name" />

                <h2 class="font-semibold mt-4">Project Category:</h2>
                <select formControlName="projectCategoryId" name="Option" id="projCategory" required
                    class="p-2 px-4 border border-gray-300 rounded text-gray-500 w-full">
                    <option value="" selected>Select the project category</option>
                    <option *ngFor="let category of projectCategories" [value]="category._id">
                        {{ category.categoryName }}
                    </option>
                </select>
            </div>

            <div class="p-1 mx-2 flex-row justify-center">
                <h2 class="font-semibold mt-4">Pricing:</h2>
                <div class="flex justify-center align-middle">
                    <div class="m-3">
                        <input formControlName="pricingType" (change)="TestValue('BUDGET')" type="radio" id="priceFix"
                            name="pricingType" value="BUDGET" checked />
                        <label for="priceFix" class="m-2 font-normal">Budget</label><br />
                    </div>
                    <div class="m-3">
                        <input formControlName="pricingType" (change)="TestValue('HOURLY_RATE')" type="radio"
                            id="priceHour" name="pricingType" value="HOURLY_RATE" />
                        <label for="priceHour" class="m-2 font-normal">Hourly Rate</label><br />
                    </div>
                </div>
                <div formGroupName="projectHourlyRate" class="flex justify-center align-middle" id="hourlyrate"
                    [ngClass]="{ hidden: createProjectForm.get('pricingType')?.value !== 'HOURLY_RATE' }">
                    <div class="m-3">
                        <h2 class="font-semibold mt-2">Min Rate:</h2>
                        <input formControlName="min" type="number" placeholder="Min" id="minHourlyRate" required
                            class="text-center max-w-24 p-1" />
                    </div>

                    <div class="m-3">
                        <h2 class="font-semibold mt-2">Max Rate:</h2>
                        <input formControlName="max" type="number" placeholder="Max" id="maxHourlyRate" required
                            class="text-center max-w-24 p-1" />
                    </div>
                </div>

                <div formGroupName="projectBudget" class="flex justify-center align-middle" id="budget"
                    [ngClass]="{ hidden: createProjectForm.get('pricingType')?.value !== 'BUDGET' }">
                    <div class="m-3">
                        <h2 class="font-semibold mt-2">Min Budget:</h2>
                        <input formControlName="min" type="number" placeholder="Min" id="minbudget" required
                            class="text-center max-w-24 p-1" />
                    </div>
                    <div class="m-3">
                        <h2 class="font-semibold mt-2">Max Budget:</h2>
                        <input formControlName="max" type="number" placeholder="Max" id="maxbudget" required
                            class="text-center max-w-24 p-1" />
                    </div>
                </div>
            </div>

            <div class="p-1 mx-2">
                <h2 class="font-semibold mt-4">Estimated duration:</h2>
                <input formControlName="estimatedDuration" placeholder="Type the duration (hours)" type="text"
                    class="p-2 px-4 border border-gray-300 rounded w-full" />
            </div>

            <div class="p-1 mx-2 flex-row">
                <h2 class="font-semibold mt-4">Scope:</h2>
                <div class="m-0.5">
                    <input formControlName="projectSize" type="radio" id="scopeS" name="projectSize" value="SMALL"
                        checked />
                    <label for="scopeS" class="m-2 font-normal">Small</label>
                </div>
                <div class="m-0.5">
                    <input formControlName="projectSize" type="radio" id="scopeM" name="projectSize" value="MEDIUM" />
                    <label for="scopeM" class="m-2 font-normal">Medium</label>
                </div>
                <div class="m-0.5">
                    <input formControlName="projectSize" type="radio" id="scopeL" name="projectSize" value="LARGE" />
                    <label for="scopeL" class="m-2 font-normal">Large</label>
                </div>
            </div>

            <div class="p-1 mx-2 flex-row">
                <h2 class="font-semibold mt-4">Experience level:</h2>
                <div class="m-0.5">
                    <input formControlName="experienceLevel" type="radio" id="entryLvl" name="experienceLevel"
                        value="ENTRY-LEVEL" checked />
                    <label for="entryLvl" class="m-2 font-normal">Entry level</label>
                </div>
                <div class="m-0.5">
                    <input formControlName="experienceLevel" type="radio" id="midLvl" name="experienceLevel"
                        value="MID-LEVEL" />
                    <label for="midLvl" class="m-2 font-normal">Mid level</label>
                </div>
                <div class="m-0.5">
                    <input formControlName="experienceLevel" type="radio" id="seniorLvl" name="experienceLevel"
                        value="SENIOR" />
                    <label for="seniorLvl" class="m-2 font-normal">Senior level</label>
                </div>
            </div>

            <div class="p-1 mx-2 flex-row">
                <h2 class="font-semibold mt-4">Workspace:</h2>
                <div class="m-0.5">
                    <input formControlName="workModel" type="radio" id="WR" name="workModel" value="REMOTE" checked />
                    <label for="WR" class="m-2 font-normal">Remote</label>
                </div>
                <div class="m-0.5">
                    <input formControlName="workModel" type="radio" id="HW" name="workModel" value="HYBRID" />
                    <label for="HW" class="m-2 font-normal">Hybrid</label>
                </div>
                <div class="m-0.5">
                    <input formControlName="workModel" type="radio" id="OSW" name="workModel" value="ON_SITE" />
                    <label for="OSW" class="m-2 font-normal">On Site</label>
                </div>
            </div>
        </div>

        <div class="bg-transparent flex justify-center">
            <button class="bg-slate-200 rounded-b-lg w-40 text-slate-400 justify-center" (click)="toggleTopForm()"
                [ngClass]="{ hidden: isTopFormHidden }">
                close
            </button>
            <button class="bg-slate-200 rounded-b-lg w-40 text-slate-400 justify-center" (click)="toggleTopForm()"
                [ngClass]="{ hidden: !isTopFormHidden }">
                open
            </button>
        </div>

        <div class="flex max-lg:grid h-fit">
            <!--Project Descrypition Module Start-->
            <div class="grid align-baseline mt-5 p-10 shadow-lg h-fit w-full">
                <h2 class="font-semibold my-3 text-3xl">Overview:</h2>
                <textarea formControlName="projectDescription" placeholder="Write the project description here"
                    class="bg-gray-50 p-3 border-2 min-h-14 max-h-96"></textarea>
            </div>
            <!--Project Descrypition Module End-->

            <!--Search Skills Module Start-->
            <div class="block justify-center bg-white mx-4 mt-5 px-10 w-fit h-fit">

                <h2 class="font-semibold my-3 text-3xl">Skills:</h2>
                <div class="search relative shadow-lg flex w-fit h-10">
                    <span class="absolute mt-1.5 mx-3">
                        <i class="fa fa-search font-light" aria-hidden="true"></i>
                    </span>
                    <input type="text" placeholder="Search skills"
                        class="w-96 p-2 pl-9 rounded rounded-r-none text-gray-600" (input)="searchSkills($event)" />
                </div>

                <div *ngIf="showSkillsList" class="row rounded-b-lg bg-slate-50 border-slate-100 overflow-hidden">
                    <ul>
                        <li *ngFor="let skill of filteredSkills">
                            <button class="w-full border-2 border-slate-100 hover:bg-slate-200"
                                (click)="addSkill(skill._id)">
                                {{ skill.skillName }}
                            </button>
                        </li>
                    </ul>
                </div>

                <div *ngIf="hasSelectedSkills()" class="grid justify-center grid-cols-2 gap-2 max-lg:grid-cols-1
                 mt-4 p-4 bg-slate-50 border-2 border-slate-200 rounded-lg">

                    <div *ngFor="let skillId of createProjectForm.get('skillIds')?.value"
                        class="flex mb-2 h-8 rounded bg-blue-500 w-fit">
                        <div class="text-white py-1 px-4 flex pr-4 text-nowrap overflow-clip">
                            {{ getSkillNameById(skillId) }}
                        </div>
                        <button type="button" (click)="removeSkill(skillId)" class="bg-red-500 hover:bg-red-700
                             text-white font-bold py-1 px-2 rounded cursor-pointer">
                            X
                        </button>
                    </div>

                </div>
            </div>
            <!--Search Skills Module End-->
        </div>
    </form>
    <!--border-slate-100 border-t-2-->
    <div class="sticky bottom-0 left-0 right-0 bg-white border-slate-100 border-t-2 z-10">
        <div class="flex justify-center align-middle my-4 w-full">
            <button [disabled]="createProjectForm.invalid" [class.disabled]="createProjectForm.invalid"
                (click)="CreateProject()"
                class="bg-blue-600 hover:bg-blue-700 text-white text-3xl font-semibold max-w-64 w-full py-3 ml-4 rounded">
                Save
            </button>
            <button [disabled]="createProjectForm.invalid" [class.disabled]="createProjectForm.invalid"
                (click)="PostProject()"
                class="bg-blue-600 hover:bg-blue-700 text-white text-3xl font-semibold max-w-64 w-full py-3 mx-4 rounded">
                Publish
            </button>
            <button (click)="CancelProject()"
                class="bg-blue-600 hover:bg-blue-700 text-white text-3xl font-semibold max-w-64 w-full py-3 mr-4 rounded">
                Cancel
            </button>
        </div>
    </div>

</div>